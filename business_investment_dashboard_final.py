# ======================================================
# ğŸ’¼ Ù…Ø¯Ù„ ÙˆØ§Ù‚Ø¹ÛŒ Ø§Ù‚Ø³Ø§Ø· Ø²Ù†Ø¬ÛŒØ±Ù‡â€ŒØ§ÛŒ Ø´Ø´â€ŒÙ…Ø§Ù‡Ù‡ (Ù…Ø¯Ù„ ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§Ø²Ø§Ø±)
# ======================================================

import pandas as pd
import matplotlib.pyplot as plt

# -----------------------------
# âš™ï¸ Ù¾Ø§Ø±Ø§Ù…ØªØ±Ù‡Ø§ÛŒ ÙˆØ±ÙˆØ¯ÛŒ
# -----------------------------
initial_capital = 100_000_000   # Ø³Ø±Ù…Ø§ÛŒÙ‡ Ø§ÙˆÙ„ÛŒÙ‡ (ØªÙˆÙ…Ø§Ù†)
months = 12                     # Ù…Ø¯Øª Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ (Ù…Ø§Ù‡)
contract_months = 6             # Ø·ÙˆÙ„ Ù‡Ø± Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ (Ù…Ø§Ù‡)
total_return_factor = 1.36      # Ø³ÙˆØ¯ Ú©Ù„ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ (Ù…Ø«Ù„Ø§Ù‹ 36Ùª Ø¨Ø±Ø§ÛŒ 6 Ù…Ø§Ù‡)

# -----------------------------
# ğŸ§® Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù¾Ø§ÛŒÙ‡
# -----------------------------
contracts = [{"amount": initial_capital, "months_left": contract_months}]
records = []

# -----------------------------
# ğŸ”¢ Ø´Ø¨ÛŒÙ‡â€ŒØ³Ø§Ø²ÛŒ Ù…Ø§Ù‡â€ŒØ¨Ù‡â€ŒÙ…Ø§Ù‡
# -----------------------------
for month in range(1, months + 1):
    income = 0
    new_contracts = []

    # Ø¯Ø±ÛŒØ§ÙØª Ø§Ù‚Ø³Ø§Ø· Ø§Ø² Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ÛŒ ÙØ¹Ø§Ù„
    for c in contracts:
        # Ù‚Ø³Ø· Ù…Ø§Ù‡Ø§Ù†Ù‡ = Ú©Ù„ Ù…Ø¨Ù„Øº Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ * (1.36 / 6)
        payment = (c["amount"] * total_return_factor) / contract_months
        income += payment
        c["months_left"] -= 1
        # Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ ÙÙ‚Ø· ØªØ§ ÙˆÙ‚ØªÛŒ Ø¯Ø± Ú†Ø±Ø®Ù‡ Ù…ÛŒâ€ŒÙ…Ø§Ù†Ø¯ Ú©Ù‡ Ø§Ù‚Ø³Ø§Ø·Ø´ ØªÙ…Ø§Ù… Ù†Ø´Ø¯Ù‡ Ø¨Ø§Ø´Ù†Ø¯
        if c["months_left"] > 0:
            new_contracts.append(c)

    # Ù…Ø¨Ù„Øº Ø§Ù‚Ø³Ø§Ø· Ø¬Ø¯ÛŒØ¯ ÙˆØ§Ø±Ø¯ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯ Ø¬Ø¯ÛŒØ¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯ (Û¶ Ù…Ø§Ù‡Ù‡)
    if income > 0:
        new_contracts.append({"amount": income, "months_left": contract_months})

    # Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù„ÛŒØ³Øª Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ÛŒ ÙØ¹Ø§Ù„
    contracts = new_contracts

    # Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙˆØ¶Ø¹ÛŒØª Ú©Ù„ÛŒ
    total_active = sum(c["amount"] for c in contracts)
    total_profit = total_active - initial_capital
    roi = (total_profit / initial_capital) * 100

    records.append({
        "Ù…Ø§Ù‡": month,
        "ØªØ¹Ø¯Ø§Ø¯ Ù‚Ø±Ø§Ø±Ø¯Ø§Ø¯Ù‡Ø§ÛŒ ÙØ¹Ø§Ù„": len(contracts),
        "Ø§Ù‚Ø³Ø§Ø· Ø¯Ø±ÛŒØ§ÙØªÛŒ (ØªÙˆÙ…Ø§Ù†)": round(income),
        "Ø³Ø±Ù…Ø§ÛŒÙ‡ ÙØ¹Ø§Ù„ Ø¯Ø± Ø¨Ø§Ø²Ø§Ø± (ØªÙˆÙ…Ø§Ù†)": round(total_active),
        "Ø³ÙˆØ¯ Ù†Ø³Ø¨Øª Ø¨Ù‡ Ø§ÙˆÙ„ÛŒÙ‡ (%)": round(roi, 2)
    })

# -----------------------------
# ğŸ“Š Ø¬Ø¯ÙˆÙ„ Ù†ØªØ§ÛŒØ¬
# -----------------------------
df = pd.DataFrame(records)
print(df.to_string(index=False))

# -----------------------------
# ğŸ“ˆ Ù†Ù…ÙˆØ¯Ø§Ø± Ø±Ø´Ø¯ Ø³Ø±Ù…Ø§ÛŒÙ‡
# -----------------------------
plt.figure(figsize=(8,5))
plt.plot(df["Ù…Ø§Ù‡"], df["Ø³Ø±Ù…Ø§ÛŒÙ‡ ÙØ¹Ø§Ù„ Ø¯Ø± Ø¨Ø§Ø²Ø§Ø± (ØªÙˆÙ…Ø§Ù†)"], marker='o', color="#86A789", label="Ø³Ø±Ù…Ø§ÛŒÙ‡ ÙØ¹Ø§Ù„")
plt.bar(df["Ù…Ø§Ù‡"], df["Ø§Ù‚Ø³Ø§Ø· Ø¯Ø±ÛŒØ§ÙØªÛŒ (ØªÙˆÙ…Ø§Ù†)"], color="#FFD29C", alpha=0.6, label="Ø§Ù‚Ø³Ø§Ø· Ø¯Ø±ÛŒØ§ÙØªÛŒ")
plt.title("Ø±ÙˆÙ†Ø¯ Ø±Ø´Ø¯ Ø³Ø±Ù…Ø§ÛŒÙ‡ ÙØ¹Ø§Ù„ Ùˆ Ø§Ù‚Ø³Ø§Ø· Ø¯Ø±ÛŒØ§ÙØªÛŒ (Ù…Ø¯Ù„ ÙˆØ§Ù‚Ø¹ÛŒ Ø¨Ø§Ø²Ø§Ø±)")
plt.xlabel("Ù…Ø§Ù‡")
plt.ylabel("ØªÙˆÙ…Ø§Ù†")
plt.grid(True, linestyle="--", alpha=0.6)
plt.legend()
plt.show()
